From 504b3590182175390f474657a372e78fb1508262 Mon Sep 17 00:00:00 2001
From: Albert Astals Cid <aacid@kde.org>
Date: Thu, 14 Sep 2017 19:14:23 +0200
Subject: Splash::scaleImage: Do not try to scale if srcHeight or srcWidth are
 < 1

Bug #102719
---
 splash/Splash.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: poppler-0.26.5/splash/Splash.cc
===================================================================
--- poppler-0.26.5.orig/splash/Splash.cc
+++ poppler-0.26.5/splash/Splash.cc
@@ -4110,7 +4110,7 @@ SplashBitmap *Splash::scaleImage(SplashI
   SplashBitmap *dest;
 
   dest = new SplashBitmap(scaledWidth, scaledHeight, 1, srcMode, srcAlpha, gTrue, bitmap->getSeparationList());
-  if (dest->getDataPtr() != NULL) {
+  if (dest->getDataPtr() != NULL && srcHeight > 0 && srcWidth > 0) {
     if (scaledHeight < srcHeight) {
       if (scaledWidth < srcWidth) {
 	scaleImageYdXd(src, srcData, srcMode, nComps, srcAlpha,
