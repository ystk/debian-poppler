From 19eedc6fb693a62f305e13079501e3105f869f3c Mon Sep 17 00:00:00 2001
From: Albert Astals Cid <aacid@kde.org>
Date: Sat, 30 Sep 2017 11:12:31 +0200
Subject: Fix crash in broken files

Bug #103045
---
 fofi/FoFiTrueType.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fofi/FoFiTrueType.cc
+++ b/fofi/FoFiTrueType.cc
@@ -448,7 +448,7 @@
 GBool FoFiTrueType::getCFFBlock(char **start, int *length) {
   int i;
 
-  if (!openTypeCFF) {
+  if (!openTypeCFF || !tables) {
     return gFalse;
   }
   i = seekTable("CFF ");
